I'm building a social media app using CLI based React Native and firestore. I used firebase's Email/password auth for user authentication. The app allows users to create, display, edit/update and delete posts. In order to give my my users a real-time experience, I implemented an instant display of posts. As a user added a new post, it instantly starts displaying on the UI. But there's a small issue with this implementation. I'm storing postData in firestore in the following format:
 const postData = {
        userId: user.uid,
        username: user.displayName || 'Anonymous',
        title: trimmedTitle,
        image: values.image,
        createdAt: serverTimestamp(),
      };
When I create/add a new post, the entire post instantly starts displaying on my frontend UI except the date (createdAt). Initially it shows "NaN day ago" instead of actual date. But as I reload the app, the actual date begins to dispaly. To debug this issue I logged the new post data in the console and found the following results before app reload:
{"createdAt": {"_elements": undefined, "_type": "timestamp"}, "id": "xoEshtvc269KSSl2tOKQ", "image": "", "title": "new one", "userId": "kDUHrcIT1HPSU6v1s7M7YvCpKDy2", "username": "Hafiz"}
And after app reload I found this:
{"createdAt": 2024-10-20T02:21:40.100Z, "id": "xoEshtvc269KSSl2tOKQ", "image": "", "title": "new one", "userId": "kDUHrcIT1HPSU6v1s7M7YvCpKDy2", "username": "Hafiz"}

Before reload I'm getting "undefine" instead of actual date and after reload I'm getting the actual date. Why is so? And how to keep the date consistent before and after app reload?